(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-277ef364"],{"0a85":function(e,t,a){"use strict";a.r(t);a("c5f6"),a("a481"),a("96cf");var i=a("3b8d"),n=(a("4917"),a("bd86")),o=(a("c3a6"),a("ad06")),r=(a("66b9"),a("b650")),s=(a("68ef"),a("a71a"),a("9d70"),a("09fe"),a("3743"),a("4d75"),a("e3b3"),a("8270"),a("786d"),a("504b"),a("bcd3"),a("c31d")),c=a("d282"),u=a("ea8e"),l=a("a142");function d(e){return Array.isArray(e)?e:[e]}function f(a,i){return new Promise(function(t){if("file"!==i){var e=new FileReader;e.onload=function(e){t(e.target.result)},"dataUrl"===i?e.readAsDataURL(a):"text"===i&&e.readAsText(a)}else t()})}var p=/\.(jpeg|jpg|gif|png|svg|webp|jfif|bmp|dpg)/i;function m(e){return!!e.isImage||(e.file&&e.file.type?0===e.file.type.indexOf("image"):e.url?(t=e.url,p.test(t)):!!e.content&&0===e.content.indexOf("data:image"));var t}var h=a("44bf"),v=a("28a2"),b=Object(c.a)("uploader"),g=b[0],y=b[1],w=g({inheritAttrs:!1,model:{prop:"fileList"},props:{disabled:Boolean,uploadText:String,afterRead:Function,beforeRead:Function,beforeDelete:Function,previewSize:[Number,String],name:{type:[Number,String],default:""},accept:{type:String,default:"image/*"},fileList:{type:Array,default:function(){return[]}},maxSize:{type:Number,default:Number.MAX_VALUE},maxCount:{type:Number,default:Number.MAX_VALUE},deletable:{type:Boolean,default:!0},previewImage:{type:Boolean,default:!0},previewFullImage:{type:Boolean,default:!0},imageFit:{type:String,default:"cover"},resultType:{type:String,default:"dataUrl"}},computed:{previewSizeWithUnit:function(){return Object(u.a)(this.previewSize)}},methods:{getDetail:function(e){return void 0===e&&(e=this.fileList.length),{name:this.name,index:e}},onChange:function(e){var t=this,a=e.target.files;if(!this.disabled&&a.length){if(a=1===a.length?a[0]:[].slice.call(a),this.beforeRead){var i=this.beforeRead(a,this.getDetail());if(!i)return void this.resetInput();if(i.then)return void i.then(function(){t.readFile(a)}).catch(this.resetInput)}this.readFile(a)}},readFile:function(a){var e,t,n=this,r=(e=a,t=this.maxSize,d(e).some(function(e){return e.size>t}));if(Array.isArray(a)){var i=this.maxCount-this.fileList.length;a.length>i&&(a=a.slice(0,i)),Promise.all(a.map(function(e){return f(e,n.resultType)})).then(function(i){var e=a.map(function(e,t){var a={file:e};return i[t]&&(a.content=i[t]),a});n.onAfterRead(e,r)})}else f(a,this.resultType).then(function(e){var t={file:a};e&&(t.content=e),n.onAfterRead(t,r)})},onAfterRead:function(e,t){this.resetInput(),t?this.$emit("oversize",e,this.getDetail()):(this.$emit("input",[].concat(this.fileList,d(e))),this.afterRead&&this.afterRead(e,this.getDetail()))},onDelete:function(e,t){var a=this;if(this.beforeDelete){var i=this.beforeDelete(e,this.getDetail(t));if(!i)return;if(i.then)return void i.then(function(){a.deleteFile(e,t)}).catch(l.e)}this.deleteFile(e,t)},deleteFile:function(e,t){var a=this.fileList.slice(0);a.splice(t,1),this.$emit("input",a),this.$emit("delete",e,this.getDetail(t))},resetInput:function(){this.$refs.input&&(this.$refs.input.value="")},onPreviewImage:function(e){var t=this;if(this.previewFullImage){var a=this.fileList.filter(function(e){return m(e)}),i=a.map(function(e){return e.content||e.url});this.imagePreview=Object(v.a)({images:i,closeOnPopstate:!0,startPosition:a.indexOf(e),onClose:function(){t.$emit("close-preview")}})}},closeImagePreview:function(){this.imagePreview&&this.imagePreview.close()},genPreviewItem:function(t,a){var i=this,e=this.$createElement,n=this.deletable&&e(o.a,{attrs:{name:"clear"},class:y("preview-delete"),on:{click:function(e){e.stopPropagation(),i.onDelete(t,a)}}}),r=m(t)?e(h.a,{attrs:{fit:this.imageFit,src:t.content||t.url,width:this.previewSize,height:this.previewSize,radius:4},class:y("preview-image"),on:{click:function(){i.onPreviewImage(t)}}}):e("div",{class:y("file"),style:{width:this.previewSizeWithUnit,height:this.previewSizeWithUnit}},[e(o.a,{class:y("file-icon"),attrs:{name:"description"}}),e("div",{class:[y("file-name"),"van-ellipsis"]},[t.file?t.file.name:t.url])]);return e("div",{class:y("preview"),on:{click:function(){i.$emit("click-preview",t,i.getDetail(a))}}},[r,n])},genPreviewList:function(){if(this.previewImage)return this.fileList.map(this.genPreviewItem)},genUpload:function(){var e=this.$createElement;if(!(this.fileList.length>=this.maxCount)){var t,a=this.slots(),i=e("input",{attrs:Object(s.a)({},this.$attrs,{type:"file",accept:this.accept,disabled:this.disabled}),ref:"input",class:y("input"),on:{change:this.onChange}});if(a)return e("div",{class:y("input-wrapper")},[a,i]);if(this.previewSize){var n=this.previewSizeWithUnit;t={width:n,height:n}}return e("div",{class:y("upload"),style:t},[e(o.a,{attrs:{name:"plus"},class:y("upload-icon")}),this.uploadText&&e("span",{class:y("upload-text")},[this.uploadText]),i])}}},render:function(e){var t=e;return t("div",{class:y()},[t("div",{class:y("wrapper")},[this.genPreviewList(),this.genUpload()])])}}),_=(a("e7e5"),a("d399")),k=(a("bda7"),a("5e46")),x=(a("da3c"),a("0b33")),C=(a("7f7f"),a("5246"),a("6b41")),N=a("b775");var O,j,I=a("fecf"),L=a("8465"),D=a("c443"),P={name:"wallet-detail",components:(O={},Object(n.a)(O,C.a.name,C.a),Object(n.a)(O,x.a.name,x.a),Object(n.a)(O,k.a.name,k.a),Object(n.a)(O,_.a.name,_.a),Object(n.a)(O,w.name,w),Object(n.a)(O,r.a.name,r.a),Object(n.a)(O,o.a.name,o.a),O),data:function(){return{disabled:!0,fileList:[],form:{price:"",payName:"",payCardNo:""},bankInfo:{},type:"1",message:"Copy These Text",img:"www.baidu.com",rechargeDayLimit:"",fetchLoading:!1}},watch:{activeName:function(e){console.log("val: ",e)}},mounted:function(){this._sysBank(),this._sysParameter();var e;navigator.userAgent.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)&&(document.body.addEventListener("focusin",function(){clearTimeout(e)}),document.body.addEventListener("focusout",function(){!1||(e=setTimeout(function(){window.scrollTo({top:0,left:0,behavior:"smooth"})},200))}))},methods:{doCopy:function(e){this.$copyText(e).then(function(e){alert("Copied"),console.log(e)},function(e){alert("Can not copy"),console.log(e)})},_sysBank:function(){var t=this;Object(I.e)().then(function(e){console.log("res: ",e),e.success&&(t.bankInfo=e.data)})},_sysParameter:function(){var t=this;Object(D.c)().then(function(e){console.log("res: ",e),e.success&&(t.rechargeDayLimit=e.data.rechargeDayLimit)})},throttle:function(e,t){e._id&&clearTimeout(e._id),e._id=window.setTimeout(function(){e(),e._id=null},t)},finished:function(){this.throttle(this.finish(),1e4)},finish:(j=Object(i.a)(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.fetchLoading)return e.abrupt("return");e.next=2;break;case 2:return this.fetchLoading=!0,e.next=5,this.$nextTick();case 5:Object(L.g)({price:this.form.price,payName:this.form.payName,receiveName:this.bankInfo.name,receiveCardNo:this.bankInfo.cardNo,receiveBank:this.bankInfo.bankName,receiveBankBranch:this.bankInfo.branchBank,img:this.img}).then(function(e){e.success?(_.a.success("提交充值信息成功"),t.$router.replace("/my-wallet")):_.a.fail(e.message)}).catch(function(){t.fetchLoading=!1});case 6:case"end":return e.stop()}},e,this)})),function(){return j.apply(this,arguments)}),afterRead:function(e){console.log("file: ",e)},beforeRead:function(e){var t=this;console.log("file123: ",e);var a,i=new FormData;return i.append("file",e),(a=i,Object(N.a)({url:"/fileUpdaterController",data:a,method:"put",headers:{"Content-Type":"multipart/form-data"}})).then(function(e){console.log("res: ",e),t.disabled=!1,t.img=e.data}).catch(function(){t.img="",_.a.fail("上传失败,请重新上传")}),!0},goBack:function(){this.$router.back()},goDetail:function(){this.$router.push({path:"/rege-detail"})},goNext:function(){var e;return this.form.price?!/^\d+(\.\d{1,2})?$/.test(this.form.price)&&("number"==typeof(e=Number(this.form.price))&&!isNaN(e))||isNaN(this.form.price)?(Object(_.a)("对不起输入金额格式错误"),!1):this.form.price<=0?(Object(_.a)("提现金额必须大于 0"),!1):this.form.payName?void(this.type="2"):(_.a.fail("请填写付款人"),!1):(_.a.fail("请填写金额"),!1)},onCopy:function(){console.log(6666),_.a.success("复制成功")},onError:function(){_.a.success("复制失败")},focus:function(){console.log("focus")},blur:function(){console.log("blur"),window.scrollTo({top:0,left:0,behavior:"smooth"})}}},B=(a("8393"),a("2877")),$=Object(B.a)(P,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("van-nav-bar",{attrs:{title:"钱包充值",fixed:"","left-arrow":""},on:{"click-left":t.goBack,"click-right":t.goDetail}},[a("van-icon",{attrs:{slot:"right",name:"more-o",size:"18"},slot:"right"})],1),t._v(" "),1==t.type?a("div",{staticClass:"recharge-money"},[a("div",{staticClass:"recharge-money-item"},[a("div",{staticClass:"title"},[t._v("充值金额")]),t._v(" "),a("div",{staticClass:"recharge-input"},[a("input",{directives:[{name:"model",rawName:"v-model.number",value:t.form.price,expression:"form.price",modifiers:{number:!0}}],staticClass:"input recharge-num",attrs:{type:"text"},domProps:{value:t.form.price},on:{input:function(e){e.target.composing||t.$set(t.form,"price",t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}})]),t._v(" "),a("div",{staticClass:"desc"},[t._v("\n        温馨提示：充值请随机附带两位小数，例如100.06实际银行卡转\n        账金额和提交订单的金额必须一致\n      ")]),t._v(" "),a("div",{staticClass:"desc"},[t._v("单笔充值最少 100 元，当日累计充值最高 "+t._s(t.rechargeDayLimit)+" 元")])]),t._v(" "),a("div",{staticClass:"recharge-money-item"},[a("div",{staticClass:"title"},[t._v("付款人")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.payName,expression:"form.payName"}],staticClass:"input",attrs:{type:"text"},domProps:{value:t.form.payName},on:{focus:t.focus,blur:t.blur,input:function(e){e.target.composing||t.$set(t.form,"payName",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"next-btn",on:{click:t.goNext}},[t._v("下一步")])]):2==t.type?a("div",{staticClass:"recharge-money-upload"},[a("div",{staticClass:"recharge-user-info"},[a("div",{staticClass:"title"},[t._v("收款人信息")]),t._v(" "),a("table",{staticClass:"recharge-user-table",staticStyle:{"border-color":"#E5E5E5"},attrs:{cellspacing:"0",cellpadding:"1",border:"1px"}},[a("tr",[a("td",[t._v("收款人")]),t._v(" "),a("td",[t._v("\n            "+t._s(t.bankInfo.name)+"\n            "),a("div",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:t.bankInfo.name,expression:"bankInfo.name",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],staticClass:"recharge-copy-btn"},[t._v("复制")])])]),t._v(" "),a("tr",[a("td",[t._v("银行卡号")]),t._v(" "),a("td",[t._v("\n            "+t._s(t.bankInfo.cardNo)+"\n            "),a("div",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:t.bankInfo.cardNo,expression:"bankInfo.cardNo",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],staticClass:"recharge-copy-btn"},[t._v("复制")])])]),t._v(" "),a("tr",[a("td",[t._v("银行")]),t._v(" "),a("td",[t._v("\n            "+t._s(t.bankInfo.bankName)+"\n            "),a("div",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:t.bankInfo.bankName,expression:"bankInfo.bankName",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],staticClass:"recharge-copy-btn"},[t._v("复制")])])]),t._v(" "),a("tr",[a("td",[t._v("开户行")]),t._v(" "),a("td",[t._v("\n            "+t._s(t.bankInfo.branchBank)+"\n            "),a("div",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:t.bankInfo.branchBank,expression:"bankInfo.branchBank",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],staticClass:"recharge-copy-btn"},[t._v("复制")])])])])]),t._v(" "),a("div",{staticClass:"recharge-pic-upload"},[a("div",{staticClass:"title"},[t._v("上传截图")]),t._v(" "),a("div",{staticClass:"recharge-upload-view"},[a("van-uploader",{attrs:{"after-read":t.afterRead,"before-read":t.beforeRead,"max-count":1},on:{delete:function(e){t.disabled=!0}},model:{value:t.fileList,callback:function(e){t.fileList=e},expression:"fileList"}})],1),t._v(" "),a("div",{staticClass:"recharge-desc"},[t._v("＊转账完成后，请务必上传转账截图提交审核")])]),t._v(" "),t.disabled?a("van-button",{staticClass:"next-btn",attrs:{disabled:""}},[t._v("完成")]):a("van-button",{staticClass:"next-btn",on:{click:t.finished}},[t._v("完成")])],1):t._e()],1)},[],!1,null,"1cb3e28e",null);t.default=$.exports},"627a":function(e,t,a){},8393:function(e,t,a){"use strict";var i=a("627a");a.n(i).a},8465:function(e,t,a){"use strict";a.d(t,"b",function(){return n}),a.d(t,"a",function(){return r}),a.d(t,"d",function(){return o}),a.d(t,"i",function(){return s}),a.d(t,"g",function(){return c}),a.d(t,"h",function(){return u}),a.d(t,"e",function(){return l}),a.d(t,"j",function(){return d}),a.d(t,"f",function(){return f}),a.d(t,"c",function(){return p});var i=a("b775");function n(e){return Object(i.a)({url:"/lxbDetail",data:e,method:"post"})}function r(e){return Object(i.a)({url:"/lxbDetail",data:e,method:"put"})}function o(e){return Object(i.a)({url:"/lxbDetail/lxbPage",params:e,method:"get"})}function s(e){return Object(i.a)({url:"/userWithdraw",data:e,method:"post"})}function c(e){return Object(i.a)({url:"/userRecharge",data:e,method:"post"})}function u(){return Object(i.a)({url:"/userWallet/getByUser",method:"get"})}function l(e){return Object(i.a)({url:"/userRecharge/page",params:e,method:"get"})}function d(e){return Object(i.a)({url:"/userWithdraw/page",params:e,method:"get"})}function f(){return Object(i.a)({url:"/sysTimeDepositsSetting/list",method:"get"})}function p(e){return Object(i.a)({url:"/lxbDetail/page",params:e,method:"get"})}},bcd3:function(e,t,a){},c3a6:function(e,t,a){"use strict";a("68ef"),a("9d70"),a("09fe"),a("3743")},c443:function(e,t,a){"use strict";a.d(t,"b",function(){return n}),a.d(t,"a",function(){return r}),a.d(t,"c",function(){return o});var i=a("b775");function n(e){return Object(i.a)({url:"/sysMessage/page",params:e,method:"get"})}function r(e){return Object(i.a)({url:"/sysMessage",params:{id:e},method:"get"})}function o(){return Object(i.a)({url:"/sysParameter",params:{},method:"get"})}},fecf:function(e,t,a){"use strict";a.d(t,"a",function(){return n}),a.d(t,"c",function(){return r}),a.d(t,"d",function(){return o}),a.d(t,"b",function(){return s}),a.d(t,"e",function(){return c});var i=a("b775");function n(e){return Object(i.a)({url:"/userBankAccount",data:e,method:"post"})}function r(e){return Object(i.a)({url:"/userBankAccount",data:e,method:"put"})}function o(e){return Object(i.a)({url:"/userBankAccount",params:e,method:"get"})}function s(e){return Object(i.a)({url:"/userBankAccount",params:{id:e},method:"delete"})}function c(){return Object(i.a)({url:"/sysBank",params:{},method:"get"})}}}]);